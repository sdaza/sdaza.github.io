---
---

<div class="pub-entry" id="{{entry.key}}">
  <div class="pub-content">
    {% if entry.type == "thesis" %}
      {{reference}}
    {% else %}
      <div class="title">{{entry.title}}</div>

      <!-- Author -->
      <div class="author">
        {% assign author_array_size = entry.author_array | size %}
        {% assign author_array_limit = author_array_size %}
        {%- if site.max_author_limit and author_array_size > site.max_author_limit %}
          {% assign author_array_limit = site.max_author_limit %}
        {% endif %}

        {%- for author in entry.author_array limit: author_array_limit -%}
          {%- assign author_is_self = false -%}
          {%- assign author_last_name = author.last | remove: "¶" | remove: "&" | remove: "*" | remove: "†" | remove: "^" -%}
          {%- if site.scholar.last_name contains author_last_name -%}
            {%- if site.scholar.first_name contains author.first -%}
              {%- assign author_is_self = true -%}
            {%- endif -%}
          {%- endif -%}
          {%- assign coauthor_url = nil -%}
          {%- if site.data.coauthors[author_last_name] -%}
            {%- for coauthor in site.data.coauthors[author_last_name] -%}
              {%- if coauthor.firstname contains author.first -%}
                {%- assign coauthor_url = coauthor.url -%}
                {%- break -%}
              {%- endif -%}
            {%- endfor -%}
          {%- endif -%}

          {%- if forloop.length > 1 -%}
            {%- if forloop.first == false -%},&nbsp;{%- endif -%}
            {%- if forloop.last and author_array_limit == author_array_size -%}and&nbsp;{%- endif -%}
          {%- endif -%}
          {%- if author_is_self -%}
            <em>{{author.first}} {{author.last}}</em>
          {%- else -%}
            {%- if coauthor_url -%}
              <a href="{{coauthor_url}}">{{author.first}} {{author.last}}</a>
            {%- else -%}
              {{author.first}} {{author.last}}
            {%- endif -%}
          {%- endif -%}
        {%- endfor -%}
        {%- assign more_authors = author_array_size | minus: author_array_limit -%}

        {%- assign more_authors_hide = more_authors | append: " more author" -%}
        {%- if more_authors > 0 -%}
          {%- if more_authors > 1 -%}
            {%- assign more_authors_hide = more_authors_hide | append: "s" -%}
          {%- endif -%}
          {%- assign more_authors_show = '' -%}
          {%- for author in entry.author_array offset: author_array_limit -%}
            {%- assign more_authors_show = more_authors_show | append: author.first | append: " " | append: author.last -%}
            {%- unless forloop.last -%}
              {%- assign more_authors_show = more_authors_show | append: ", " -%}
            {%- endunless -%}
          {%- endfor -%}
          , and
          <span
              class="more-authors"
              title="click to view {{more_authors_hide}}"
              onclick="
                var element = this;
                element.removeAttribute('title');
                var more_authors_text = element.textContent == '{{more_authors_hide}}' ? '{{more_authors_show}}' : '{{more_authors_hide}}';
                var cursorPosition = 0;
                var textAdder = setInterval(function(){
                  element.textContent = more_authors_text.substring(0, cursorPosition + 1);
                  if (++cursorPosition == more_authors_text.length){
                    clearInterval(textAdder);
                  }
              }, '{{site.more_authors_animation_delay}}');
              "
          >{{more_authors_hide}}</span>
        {%- endif -%}
      </div>

      <div class="periodical">
        {% if entry.type == "article" %}
          <em>{{entry.journaltitle}}</em>
        {% elsif entry.type == "inproceedings" and entry.conference %}
          <em>{{entry.eventtitle}}</em>
        {% elsif entry.type == "incollection" %}
          <em>{{entry.booktitle}}</em>
        {% elsif entry.type == "inproceedings" %}
          <em>{{entry.pub}}</em>
        {% elsif entry.type == "unpublished" %}
          <em>Working paper</em>
        {% elsif entry.type == "report" or entry.type == "techreport" %}
          <em>{{entry.study}}</em>
        {% endif %}
        {% if entry.date %}
          <span class="periodical-year">{{ entry.date }}</span>
        {% endif %}
        {% if entry.status %}
          <span class="periodical-status">({{ entry.status) }})</span>
        {% endif %}
      </div>
    {% endif %}

    <div class="links">
      {% if entry.abstract %}
        <a class="abstract btn btn-sm shadow-none" role="button">Abs</a>
      {% endif %}
      {% if entry.bibtex_show %}
        <a class="bibtex btn btn-sm shadow-none" role="button">Bib</a>
      {% endif %}
      {% if entry.html %}
        <a href="{{ entry.html }}" class="btn btn-sm shadow-none" role="button" target="_blank">HTML</a>
      {% endif %}
      {% if entry.preprint %}
        <a href="{{ entry.preprint }}" class="btn btn-sm shadow-none" role="button" target="_blank">Preprint</a>
      {% endif %}
      {% if entry.pdf %}
        {% if entry.pdf contains '://' %}
        <a href="{{ entry.pdf }}" class="btn btn-sm shadow-none" role="button" target="_blank">PDF</a>
        {% else %}
        <a href="{{ entry.pdf | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm shadow-none" role="button" target="_blank">PDF</a>
        {% endif %}
      {% endif %}
      {% if entry.supp %}
        {% if entry.supp contains '://' %}
        <a href="{{ entry.supp }}" class="btn btn-sm shadow-none" role="button" target="_blank">Supp</a>
        {% else %}
        <a href="{{ entry.supp | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm shadow-none" role="button" target="_blank">Supp</a>
        {% endif %}
      {% endif %}
      {% if entry.blog %}
        <a href="{{ entry.blog }}" class="btn btn-sm shadow-none" role="button" target="_blank">Blog</a>
      {% endif %}
      {% if entry.code %}
        <a href="{{ entry.code }}" class="btn btn-sm shadow-none" role="button" target="_blank">Code</a>
      {% endif %}
      {% if entry.poster %}
        {% if entry.poster contains '://' %}
        <a href="{{ entry.poster }}" class="btn btn-sm shadow-none" role="button" target="_blank">Poster</a>
        {% else %}
        <a href="{{ entry.poster | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm shadow-none" role="button" target="_blank">Poster</a>
        {% endif %}
      {% endif %}
      {% if entry.slides %}
        {% if entry.slides contains '://' %}
        <a href="{{ entry.slides }}" class="btn btn-sm shadow-none" role="button" target="_blank">Slides</a>
        {% else %}
        <a href="{{ entry.slides | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm shadow-none" role="button" target="_blank">Slides</a>
        {% endif %}
      {% endif %}
      {% if entry.website %}
        <a href="{{ entry.website }}" class="btn btn-sm shadow-none" role="button" target="_blank">Website</a>
      {% endif %}
      {%- if entry.altmetric %}
      <script type="text/javascript" src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script><div doi="{{ entry.altmetric }}" class="altmetric-embed" data-hide-no-mentions="true" data-hide-less-than="15" data-badge-popover="right" data-badge-type="2" style="display:inline"></div>
      {%- endif %}
    </div>

    <!-- Hidden abstract block -->
    {% if entry.abstract %}
    <div class="abstract hidden">
      <p>{{ entry.abstract }}</p>
    </div>
    {% endif %}

    <!-- Hidden bibtex block -->
    {% if entry.bibtex_show %}
    <div class="bibtex hidden">
      {% highlight bibtex %}{{ entry.bibtex }}{% endhighlight %}
    </div>
    {% endif %}
  </div>
</div>